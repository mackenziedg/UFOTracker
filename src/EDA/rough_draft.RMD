---
title: "Predicting UFO Sightings"
author: "Shane Caldwell, Fanny Chow, Mackenzie Gray, Noah Johnson"
date: "11/30/2017"
output:
  pdf_document:
    latex_engine: xelatex
    number_sections: yes
    toc: yes
    toc_depth: 4
  html_document:
    toc: yes
linkcolor: blue
urlcolor: blue
fontsize: 11pt 
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
```

# Introduction

Our group set out to create a model to predict UFO sightings by a variety of cofactors. This was a case where the project and the analysis were created by the data at hand rather than a starting from a question.

The [National UFO Reporting Center](http://www.nuforc.org/webreports.html), established in 1974,  has put together a database for citizens to submit reports of unidentified flying object sightings. One can submit reports online, but they also have a hotline that can be called at any time, and the information from the report will be placed into the database. Regardless of the medium the report is received in, it will be filtered to confirm it isn't a "hoax".

The database is moderately sized, with over 80,000 observations of reports. Reports include a timestamp, a description of the aircraft, the state and city the report came from, and the duration of the report. 

Our interest was in finding covariates to help us predict the number of reports for a specific state during a specific year. This would involve cleaning the web-scraped UFO dataset and mutating it into something closer to what we needed. It also involved carefully choosing cofactors - not a lot of literature on UFOs sightings and their trends to lean on!

# The Data

For independent variables, we ended up choosing number of breweries in a state per year, the number of alien movies released per year, per capita gdp per year, state population, portion of the population with internet access, and mean distance from military bases. Below, we argue for the "theoretical" inclusion of each variable and explain both why we chose it, where we found the data, and how we went about cleaning it. 

## Breweries Per State Per Year

Alcohol inhibits our perceptions. If you've been out drinking, perhaps you're more likely to think you saw a UFO instead of stopping at a more reasonable explanation. If there are more breweries in your state, it's more likely you'll be drinking. 

## Alien Movies Per Year

How does culture affect people's perceptions of the "supernatural"? When trailers for alien movies have been playing on TV particularly frequently for a given year, are you more likely to have aliens playing in the back of your mind when you see something in the sky you can't explain? Does watching sci-fi movies make it more likely that you turn to an organization like the UFO Reporting Center when something bright is in the sky?

Scraping for the number of alien movies released a year would be difficult, but luckily [wikipedia](https://en.wikipedia.org/wiki/List_of_films_featuring_extraterrestrials) has a list already compiled. While there is no way the list could be complete, it features movies from years as far back as 1902. The wikipedia table was scraped and turned into a csv file and a simple python script was written to bin the frequency of movies by year to create the final dataset.

## Mean Distance from Military Base Location

## Per Capita GDP

Is "seeing things in the sky" a poor man's game? Does the wealth of a particular state influence how they spend their time? Perhaps those with less money have nothing to do but sit outside and look into the sky?

## Portion of population with internet access by year

To even know about the UFO reporting center's existence, you need internet access. If you see a UFO and don't have access to the internet, it's unlikely you'd ever find the hotline to call to report it. It would just end up as a story you told your friends rather than a report in the UFO database. 

# EDA 

## Breweries Per State

## Alien Movies Per Year

```{r}
#pull in alien movies
alien_movies <- read.csv(file = "/Users/shane/Documents/UFOTracker/data/raw/alien_movies_per_year.csv", header = TRUE)
sightings <- read.csv(file = "/Users/shane/Documents/UFOTracker/data/raw/ufo_sightings.csv", header = TRUE)

ggplot(alien_movies, aes(x =year, y =num_movies )) + geom_point(shape=1) + labs( title = "Number of Alien Movies Per Year\n1902 - 2018", x = "Year", y = "Alien Movies Released") + theme(plot.title = element_text(hjust = 0.5))
```

One big problem right off the bat - a lot of the early years are only zeros. After the 1902 film (a silent film known as "A Trip to the Moon", if you were curious) is followed by a large number of empty slots. 

Luckily, since the UFO reporting society was founded in 1974, we decided to remove all variables prior to this year. Reports before this year appear in the dataset, but as discussed above we determined these reports would not be live records. They would be "popular" events that were recorded after the fact, or incidents reported years after they happened. Let's see if that improves the look of our scatterpplot.


```{r}
alien_movies_new <- filter(alien_movies, year >= 1974)


ggplot(alien_movies_new, aes(x =year, y =num_movies )) + geom_point(shape=1) + labs( title = "Number of Alien Movies Per Year\n1974 - 2018", x = "Year", y = "Alien Movies Released") + theme(plot.title = element_text(hjust = 0.5))

```

Still a definite trend upwards. That could have to do with the number of movies released increasing in general each year moreso than an increase in the genre alien movies specifically. 

Anyway, we have to filter the sightings dataset to find more specific information about our dataset. Currently we can't compare the number of movies to our number of sightings. Let's filter the dataset down to sightings taking place in Florida since 1974 and see how they compare to the number of movies released each year. 

```{r}

fl_sightings <- filter(sightings, tolower(state) == 'fl' )
fl_sightings$date_time <- as.Date(fl_sightings$date_time, "%m/%d/%y")
tmp <- lapply(strsplit(as.character(fl_sightings$date_time), "-"), `[[`, 1)
tmp2 <- sapply(tmp, "[[", 1)
fl_sightings$year <- as.numeric(tmp2)
fl_sightings_75 <- filter(fl_sightings, year >= 1975)
fl_sightings_75 <- filter(fl_sightings, year < 2018)

sightings_per_year_fl <- as.data.frame(table(fl_sightings_75$year))

#sightings_per_year_fl_75$Freq
df1 <- cbind(sightings_per_year_fl$Freq[5:49], alien_movies_new$num_movies)
df1 <- as.data.frame(df1)

colnames(df1) <- c("Sightings_Per_Year", "Alien_Movies_Per_Year")

ggplot(df1, aes(x =Alien_Movies_Per_Year, y =Sightings_Per_Year )) + geom_point(shape=1) + labs( title = "Number of Alien Sightings VS Alien Movies eleased\n1974 - 2018", x = "Alien Movies Released Per Year", y = "UFO Sightings Per Year") + theme(plot.title = element_text(hjust = 0.5))
```

There seem to be several significant outliers. It appears one year there were over 600 alien sightings, but almost no alien movies released. 



## Mean Distance From Military Base Location

## Per Capita GDP

## Portion of population with internet access by year

# Data Analysis

## Variable Selection

## Model Selection

## Validation

# Conclusion

## Results

## Future Work
Instead of using alien movies per year, we might use the amount of money grossed in aliens films per year. This would give a greater indicator of a film's affect on the popular consciousness. A movie like "Aliens"" surely had a greater effect than "Mars Needs Moms", for example. Our current scraping of the data, relying on each movie as a equally effective unit and simply counting the number of movies per year is likely missing a lot of that information. 

# Works Cited